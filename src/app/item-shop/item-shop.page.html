<ion-content>

  <ion-toolbar>
    <img src="../../assets/dungeon-logo.png" id="header-logo" (click)="goToMenu()" alt="Dungeon Logo" />
  </ion-toolbar>


  <p class="loading-text" *ngIf="isLoading">
    Loading...
  </p>

  <div *ngIf="!isLoading">
    <div class="shop-info">
      <p class="shop-title">¡Descubre los objetos del día!</p>
      <p class="shop-sub">Cada día nuevos objetos</p>
      <p class="update-date">Actualizado: {{ lastUpdate | date:'short' }}</p>
    </div>

    <p *ngIf="infoUser"> gold: {{ infoUser.coins }}</p>

    <div class="items-list">
      <div class="item-card" *ngFor="let item of items">
        <h2>{{ item.name }}</h2>
        <p class="desc" [ngClass]="{'long': (item.description?.length || 0) > 55}">{{ item.description }}</p>
        <div class="price-row">
          <span class="price">{{ item.price }} gold</span>
          <ion-button size="small" (click)="buyItem(item)" [disabled]="!infoUser || infoUser.coins < item.price">
            Comprar
          </ion-button>
        </div>
      </div>
      <div class="item-card call-to-action" *ngIf="items.length === 0">
        <h2>¡Vuelve pronto!</h2>
        <p class="desc">La tienda se está reabasteciendo. Pronto habrá nuevos objetos para ti.</p>
      </div>
    </div>
  </div>

</ion-content>