<ion-content>

  <ion-toolbar>
    <img src="../../assets/dungeon-logo.png" id="header-logo" (click)="goToMenu()" alt="Dungeon Logo" />
  </ion-toolbar>

  <p class="loading-text" *ngIf="isLoading">â³ Loading...</p>

  <!-- ===== PODIO ===== -->
  <div class="podio-container">

    <!-- PLATA -->
    <div class="podio-column silver" *ngIf="ranking.length > 1">
      <div class="player-card podium-card runner-up">
        <p class="podio-rank">2</p>
        <span class="rank-badge silver">{{ getTitle(ranking[1]?.xp) }}</span>

        <img class="ranking-avatar podium-avatar" [src]="'assets/character/' + ranking[1]?.state.race + '.png'" />

        <p class="podio-name">{{ ranking[1]?.name }}</p>
        <p class="podio-xp">Lvl {{ getLevel(ranking[1]?.xp) }} Â· {{ ranking[1]?.xp }} XP</p>

        <div class="xp-bar">
          <div class="xp-fill" [style.width.%]="ranking[1]?.xp % 100"></div>
        </div>

        <div class="player-stats">
          <p>â¤ï¸ {{ ranking[1]?.hp }} | ğŸ’ª {{ ranking[1]?.strength }}</p>
          <p>âš¡ {{ ranking[1]?.agility }} | ğŸ€ {{ ranking[1]?.luck }}</p>
        </div>
      </div>
      <div class="podio-base silver"></div>
    </div>

    <!-- ORO -->
    <div class="podio-column gold" *ngIf="ranking.length > 0">
      <div class="player-card podium-card champion">
        <p class="podio-rank">1</p>
        <span class="rank-badge gold">{{ getTitle(ranking[0]?.xp) }}</span>

        <img class="ranking-avatar podium-avatar" [src]="'assets/character/' + ranking[0]?.state.race + '.png'" />

        <p class="podio-name">{{ ranking[0]?.name }}</p>
        <p class="podio-xp">Lvl {{ getLevel(ranking[0]?.xp) }} Â· {{ ranking[0]?.xp }} XP</p>

        <div class="xp-bar">
          <div class="xp-fill" [style.width.%]="ranking[0]?.xp % 100"></div>
        </div>

        <div class="player-stats">
          <p>â¤ï¸ {{ ranking[0]?.hp }} | ğŸ’ª {{ ranking[0]?.strength }}</p>
          <p>âš¡ {{ ranking[0]?.agility }} | ğŸ€ {{ ranking[0]?.luck }}</p>
        </div>
      </div>
      <div class="podio-base gold"></div>
    </div>

    <!-- BRONCE -->
    <div class="podio-column bronze" *ngIf="ranking.length > 2">
      <div class="player-card podium-card third-place">
        <p class="podio-rank">3</p>
        <span class="rank-badge bronze">{{ getTitle(ranking[2]?.xp) }}</span>

        <img class="ranking-avatar podium-avatar" [src]="'assets/character/' + ranking[2]?.state.race + '.png'" />

        <p class="podio-name">{{ ranking[2]?.name }}</p>
        <p class="podio-xp">Lvl {{ getLevel(ranking[2]?.xp) }} Â· {{ ranking[2]?.xp }} XP</p>

        <div class="xp-bar">
          <div class="xp-fill" [style.width.%]="ranking[2]?.xp % 100"></div>
        </div>

        <div class="player-stats">
          <p>â¤ï¸ {{ ranking[2]?.hp }} | ğŸ’ª {{ ranking[2]?.strength }}</p>
          <p>âš¡ {{ ranking[2]?.agility }} | ğŸ€ {{ ranking[2]?.luck }}</p>
        </div>
      </div>
      <div class="podio-base bronze"></div>
    </div>

  </div>


  <!-- ===== RESTO ===== -->
  <div class="ranking-list">
    <div class="player-card" *ngFor="let player of ranking.slice(3); let i = index">
      <img class="ranking-avatar" [src]="'assets/character/' + player.state.race + '.png'" />

      <h2>#{{ i + 4 }} - {{ player.name }}</h2>

      <span class="rank-badge normal">
        {{ getTitle(player.xp) }}
      </span>

      <p class="player-level">
        Lvl {{ getLevel(player.xp) }} Â· {{ player.xp }} XP
      </p>

      <div class="xp-bar">
        <div class="xp-fill" [style.width.%]="player.xp % 100"></div>
      </div>

      <div class="player-stats">
        <p>â¤ï¸ {{ player.hp }} | ğŸ’ª {{ player.strength }}</p>
        <p>âš¡ {{ player.agility }} | ğŸ€ {{ player.luck }}</p>
      </div>
    </div>
  </div>

</ion-content>